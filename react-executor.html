<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exponent Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function RefreshCw({ className }) {
            return (
                <svg
                    className={className}
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth={2}
                        d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                    />
                </svg>
            );
        }

        function ExponentAnimator() {
            const [base, setBase] = useState(null);
            const [exponent, setExponent] = useState(null);
            const [result, setResult] = useState(null);
            const [step, setStep] = useState(0);
            const [isAnimating, setIsAnimating] = useState(false);

            const generateNewProblem = () => {
                const newBase = Math.floor(Math.random() * 4) + 2;
                const newExponent = Math.floor(Math.random() * 3) + 3;
                const newResult = Math.pow(newBase, newExponent);

                setBase(newBase);
                setExponent(newExponent);
                setResult(newResult);
                setStep(0);
                setIsAnimating(true);
            };

            useEffect(() => {
                generateNewProblem();
            }, []);

            useEffect(() => {
                if (!isAnimating || step > exponent + 1) {
                    if (step > exponent + 1) {
                        setIsAnimating(false);
                    }
                    return;
                }

                const timer = setTimeout(() => {
                    setStep(s => s + 1);
                }, 1200);

                return () => clearTimeout(timer);
            }, [step, isAnimating, exponent]);

            const renderMultiplication = () => {
                if (!base || !exponent) return null;

                const factors = Array(exponent).fill(base);

                return (
                    <div className="flex flex-wrap justify-center items-center gap-2 text-2xl sm:text-3xl">
                        {factors.map((factor, idx) => (
                            <React.Fragment key={idx}>
                                <span
                                    className={`transition-all duration-500 ${
                                        step > idx + 1 ? 'text-blue-600 font-bold scale-110' : 'text-gray-700'
                                    }`}
                                >
                                    {factor}
                                </span>
                                {idx < factors.length - 1 && (
                                    <span className="text-gray-400">Ã—</span>
                                )}
                            </React.Fragment>
                        ))}
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-100 to-cyan-100 flex items-center justify-center p-4">
                    <div className="bg-white rounded-3xl shadow-2xl p-6 sm:p-8 max-w-md w-full">
                        <div className="text-center mb-8">
                            <h1 className="text-3xl sm:text-4xl font-bold text-gray-800 mb-2">
                                Exponent Explorer
                            </h1>
                            <p className="text-gray-600">Watch the calculation unfold!</p>
                        </div>

                        {base && exponent && (
                            <div className="space-y-8">
                                <div className="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6 text-center">
                                    <div className={`text-5xl sm:text-6xl font-bold text-blue-600 transition-all duration-500 ${
                                        step >= 1 ? 'scale-100 opacity-100' : 'scale-50 opacity-0'
                                    }`}>
                                        {base}
                                        <sup className="text-3xl sm:text-4xl">{exponent}</sup>
                                    </div>
                                </div>

                                <div className={`bg-gray-50 rounded-2xl p-6 min-h-[80px] flex items-center justify-center transition-all duration-500 ${
                                    step >= 2 ? 'opacity-100' : 'opacity-0'
                                }`}>
                                    {renderMultiplication()}
                                </div>

                                <div className={`bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 text-center transition-all duration-700 ${
                                    step > exponent + 1 ? 'scale-100 opacity-100' : 'scale-90 opacity-0'
                                }`}>
                                    <div className="text-gray-600 text-lg mb-2">Answer:</div>
                                    <div className="text-5xl sm:text-6xl font-bold text-green-600">
                                        {result}
                                    </div>
                                </div>
                            </div>
                        )}

                        <button
                            onClick={generateNewProblem}
                            disabled={isAnimating}
                            className="mt-8 w-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white py-4 rounded-xl font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:hover:scale-100 flex items-center justify-center gap-2"
                        >
                            <RefreshCw className={`w-5 h-5 ${isAnimating ? 'animate-spin' : ''}`} />
                            {isAnimating ? 'Animating...' : 'New Problem'}
                        </button>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<ExponentAnimator />, document.getElementById('root'));
    </script>
</body>
</html>
